$(function(){function o(){for(var o="0123456789ABCDEF",e="#",n=0;n<6;n++)e+=o[Math.floor(16*Math.random())];return e}function e(o){window.location.href="./"+o.target.id+".html"}function n(o,e){Publish.zoom||o.forEach(function(o){o.getGeometry().forEachLatLng(function(o){e.extend(o)})})}function t(){r.append($('<div id="legend-container"><h4 class="panel-title">'+Publish.legend+"</h4><br/></div>"));var e=$('<div id="legend-content">').appendTo($("#legend-container")),t=[],i=new google.maps.LatLngBounds;$.each(Publish.data,function(s,a){var l="./data/"+s+"/"+a+".geojson",r=$.getJSON(l,function(t){var a=o(),l=new google.maps.Data;l.addGeoJson(t),l.setStyle(function(o){return o.setProperty("project",s),{fillColor:a,strokeWeight:1}}),l.addListener("click",function(o){window.location.href="./"+o.feature.getProperty("project")+".html"}),l.setMap(d),n(l,i);var r=$('<div style="height:25px;">').append($('<div class="legend-color-box">').css({backgroundColor:a})).append($("<span>").css("lineHeight","23px").html(s));e.append(r)});r.done(function(){t.push(r)})}),setTimeout(function(){$.when(t).then(function(){d.fitBounds(i)})},1e3)}function i(){google.maps.visualRefresh=!0;var o={minZoom:Publish.minZoom,maxZoom:Publish.maxZoom,mapTypeId:google.maps.MapTypeId[Publish.mapTypeId],mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU,position:google.maps.ControlPosition.TOP_RIGHT}};Publish.center&&(o.center=new google.maps.LatLng(Publish.center.lat,Publish.center.long)),Publish.zoom&&(o.zoom=Publish.zoom);var n=document.getElementById("map");d=new google.maps.Map(n,o),d.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(r[0]),d.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push($("#footer")[0]),$("#layers").find(":button").click(e),t()}function s(){var o=$(".mini-submenu-left");o.is(":visible")?$("#map").find(".ol-zoom").css("margin-left",0).removeClass("zoom-top-opened-sidebar").addClass("zoom-top-collapsed"):$("#map").find(".ol-zoom").css("margin-left",$(".sidebar-left").width()).removeClass("zoom-top-opened-sidebar").removeClass("zoom-top-collapsed")}function a(){return $(".sidebar").width()==$(window).width()}function l(){a()&&($(".sidebar-left .sidebar-body").fadeOut("slide"),$(".mini-submenu-left").fadeIn())}var d,r=$("#legend");google.maps.event.addDomListener(window,"load",i),$(".sidebar-left .slide-submenu").on("click",function(){var o=$(this);o.closest(".sidebar-body").fadeOut("slide",function(){$(".mini-submenu-left").fadeIn(),s()})}),$(".mini-submenu-left").on("click",function(){var o=$(this);$(".sidebar-left .sidebar-body").toggle("slide"),o.hide(),s()}),$(window).on("resize",s),l(),s()});